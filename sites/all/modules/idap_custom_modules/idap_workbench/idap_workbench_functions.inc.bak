<?php



function idap_workbench_save_taxonomy_term($parameters) {
	
	$term->vid = 6;
	$term->name = $parameters['section_title'];
	$term->parent = $parameters['taxonomy_parent'];
	$term->weight = 10;

	taxonomy_term_save($term);
	$tid = $term->tid;
	
	return $tid;
}

function idap_workbench_save_breadcrumb_context($parameters, $type) {
	$context_name = $parameters['machine_title'].'_'.$type.'_breadcrumb';
	$tag = 'breadcrumb';
	$node_type = $type;
	$taxonomy_id = $parameters['tid'];
	
	$context = new stdClass();
	$context->disabled = FALSE; /* Edit this to true to make a default context disabled initially */
	$context->api_version = 3;
	$context->name = $context_name;
	$context->description = '';
	$context->tag = $tag;
	$context->conditions = array(
	  'node' => array(
	    'values' => array(
	      $node_type => $node_type,
	    ),
	    'options' => array(
	      'node_form' => '1',
	    ),
	  ),
	  'node_taxonomy' => array(
	    'values' => array(
	      $taxonomy_id => $taxonomy_id,
	    ),
	    'options' => array(
	      'node_form' => '1',
	    ),
	  ),
	);
	$context->reactions = array(
	  'breadcrumb' => 'taxonomy/term/'.$taxonomy_id,
	);
	$context->condition_mode = 1;
	
	context_save($context);
}

function idap_workbench_save_page_builder_context($options) {
	$context = new stdClass();
	$context->disabled = FALSE; /* Edit this to true to make a default context disabled initially */
	$context->api_version = 3;
	$context->name = 'thematic_group_1';
	$context->description = '';
	$context->tag = '';
	$context->conditions = array(
	  'node_taxonomy' => array(
	    'values' => array(
	      165 => 165,
	    ),
	    'options' => array(
	      'node_form' => '1',
	    ),
	  ),
	);
	$context->reactions = array(
	  'block' => array(
	    'blocks' => array(
	      'idap_page_builder-masthead_banner' => array(
	        'module' => 'idap_page_builder',
	        'delta' => 'masthead_banner',
	        'region' => 'masthead',
	        'weight' => '-10',
	      ),
	    ),
	  ),
	  'menu' => 'taxonomy/term/165',
	  'theme_html' => array(
	    'class' => 'thematic-group-home-page',
	  ),
	);
	$context->condition_mode = 0;
}

/* function idap_workbench_create_landing_pages($section_title, $tid, $subpage_types) {
	$titles = idap_workbench_subpage_types();
	
	foreach ($subpage_types as $type) {
		if ($type != 0) {
			$nid = idap_workbench_save_node($titles[$type], $type);
		}
	$nodes[$type] = $titles[$type];
	}
	return $nodes;
}

function idap_workbench_save_node($section_title, $subpage_type) {	
	$node = (object) NULL;
	$node->type = $subpage_type;
	$node->title = $section_title;
	$node->uid = 0;
	$node->created = strtotime("now");
	$node->changed = strtotime("now");
	$node->status = 1;
	$node->comment = 0;
	$node->promote = 0;
	$node->moderate = 0;
	$node->sticky = 0;
	$node->language = 'und';
	
	node_object_prepare($node);
	node_save($node);
	$nid = $node->nid;
	return $nid; 
} */

function idap_workbench_node_types() {
	return array(
		'network_news' => 'Network News',
		'blog' => 'Blogs',
		'event' => 'Events',
		'resource' => 'Resources',
		'e_discussion' => "E-Discussions",
		'group_collaboration' => 'Collaboration Space',
	);
}


?>